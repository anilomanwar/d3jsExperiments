<!DOCTYPE html>
<html>
  <head>
 <link type="text/css" rel="stylesheet" media="all" href="stylesheets/fancymenu.css" />
  <title> :: Chart Wheel :: </title>
  </head>
  <body>
  <table width=1024px style="margin: 0px auto">
<tr>
<td>
   

  <div class="wrapper" id="wrapper1">
	Select Shape  :
    <div class="lavalamp" >

    <ul>
	  <li class="active" name="Shape"><a href="">circle</a></li>
        <li  name="Shape"><a href="">square</a></li>
      
       <li name="Shape"><a href="">star</a></li>
    </ul>
        <div class="floatr"></div>
    </div>
   </div>
</td>
<td>  
    <div class="wrapper" id="wrapper2">
	Select Theme  :
    <div class="lavalamp">
    <ul >
        <li class="active"  name="Theme"><a href="">Theme 1</a></li>
        <li  name="Theme"><a href="">Theme 2</a></li>
        <li name="Theme"><a href="" >Theme 3</a></li>
        
    </ul>
        <div class="floatr"></div>
    </div>
	 </div>
</td>
<td> 
 
</td>
<td> 
   </tr>
   
   </table>
  <div id=viz1 style="width:1024px;margin: 0px auto">
 
      <script src="javascripts/jquery-1.6.2.min.js"></script>
	  <script src="javascripts/lavalamp.js" type="text/javascript"></script>
    <script src="http://d3js.org/d3.v2.js" type="text/javascript" ></script>
	<script src="javascripts/CustomTooltip.js" type="text/javascript"></script>
	<script src="javascripts/superformula.js" type="text/javascript" ></script>
	
    <script type="text/javascript">

var w = 760,
    h = 600,
    start = Date.now();
	var cc=0,dim=0;

var base=100,factor=25;
	

var colors1 =[["#023467","#064c91","#175eac","#308dd0","#539fd9","#8fcaec","#010900","#2b3b17","#44583d","#6d7c21","#aaada6"],["#9d5990","#214e77","#008c92","#44ab8c","#68ac59","#7eb44d","#d5c427","#f99c47","#ee796b","#f397a0"],["#FFCC99","#FF9933","#FFCCCC","#FF99CC","#CC6699","#993366","#660033","#CC0099","#330033","#ff00ff"],["#15260f","#386728","#598d46","#a3c098","#a2e5d6","#9593e1","#5652cf","#2c27c3","#1a1775","#080727"]];
var isColor2=[[9,4,4,5,9,8,7,8],[6,7,5,7,7,7,6,7],[8,7,3,8,7,7,6,8],[8,8,6,7,6,6,5,9],[7,7,4,8,8,4,8,8],[6,7,5,7,6,5,6,9],[4,5,7,5,6,5,9,6],[8,6,9,6,7,3,8,8],[7,8,8,7,6,3,8,8],[8,8,7,8,7,5,7,9]];
var rings = [{radius: base+ factor * 1, width: 16, speed: 0,show : true,  name:"Portability"},{radius: base+ factor * 2, width: 16, speed: 0,show : true,  name:"Scalability"},{radius: base+ factor * 3, width: 16, speed: 0,show : true,  name:"Maturity"},  {radius: base+ factor * 4, width: 16, speed: 0,show : true,  name:"Extensibility"},  {radius: base+ factor * 5, width: 20, speed: 0,show : true,  name:"Customization"},{radius: base+ factor * 6, width: 20, speed: 0,show : true,  name:"Availability of Charts"},{radius: base+ factor * 7, width: 20, speed: 0,show : true,  name:"Documnatation"},  {radius: base+ factor * 8, width: 24, speed: 0,show : true,  name:"Look and Feel"},{radius: base+ factor * 9, width: 24, speed: 0,show : true,  name:"Usability"},{radius: base+ factor * 10, width: 24, speed: 0,show : true,  name:"Overall Score"}];

var bkColor ="#DDD";
var tooltip = CustomTooltip("my_tooltip", 200);

var Series =["Infoviz","Protoviz","Axiis","Flare","Raphael","Dundas","Highcharts ","D3js"];
var Series1 =[true,true,true,true,true,true,true,true];

	  var small = superformula();
  var svg = d3.select("#viz1").append("svg:svg")
    .attr("width", 1024)
    .attr("height", h)
  .append("svg:g")
    .attr("transform", "translate(" + (w / 2 +10) + "," + (h / 2 ) + ")scale(.65)");
	
	var svg1 = d3.select("#viz2").append("svg:svg")
    .attr("width", 400)
    .attr("height", 250)
  .append("svg:g")
    .attr("transform", "translate(" + 300 *0.8 + "," + h *0.01 + ")scale(.8)");
	
	var svg2 = d3.select("#viz3").append("svg:svg")
    .attr("width", 400)
    .attr("height", 250)
  .append("svg:g")
    .attr("transform", "translate(" + 300 *0.8 + "," + h *0.01 + ")scale(.8)");

var ring =svg.selectAll("g")
    .data(rings)
  .enter().append("svg:g")
    .attr("class", "ring")
    .each(ringEnter);


var snames = svg.selectAll(".series")
      .data(Series).enter()
	  .append("text")
	  .attr("class","SeriesText")
	  .attr("x",function(d,i) { return 0+ (400)*Math.cos((Math.PI/4*i)-(Math.PI/6));})
	  .attr("y",function(d,i) { return 0+ (400)*Math.sin(((Math.PI/4*i)-Math.PI/6));})
	  .attr("text-anchor", "middle")
	  .style("fill", function(d,i) { return Series1[i]?"#222":"#aaa"})
	  .text(function(d) { return d; })
	  .on("mouseout", function(d,i) { d3.select(this).style("font-size","18px");})
	  .on("mouseover", function(d,i) { d3.select(this).style("font-size","24px");  barchart1(i)})
	  .on("click", function(d,i) { Series1[i]= !Series1[i]; reload2(); });
		
	
	
var legend = svg.selectAll(".legend")
      .data(rings)
    .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) { return "translate(20," + ((i * 24)-400) + ")"; })
	  .on("click", function(d, i) {rings[i].show = !rings[i].show ; reload2()})
	  .on("mouseout", function(d,i) { d3.select(this).style("fill","#666");})
	  .on("mouseover", function(d,i) {d3.select(this).style("fill",colors1[getTindex()][i]); $("#1234").html(d.name); barchart(i)});

  legend.append("rect")
      .attr("x", 158-w)
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", function(d,i) { return colors1[getTindex()][i]; });

  legend.append("text")
      .attr("x", 194 -w)
      .attr("y", 9)
      .attr("dy", ".35em")
      .style("text-anchor", "start")
      .text(function(d) { return d.name; });
$(document).ready(function () {
barchart(9);
barchart1(7);
  });
function ringEnter(d, i) {
  var n = 80,k = 360 / n;cc=0; dim=0;


 d3.select(this).selectAll("g")
    .data(d3.range(n).map(function() { return d; }))
    .enter()
	 .append("path")	 
	 .attr("transform", function(_, i) { return "rotate(" + i * k + ")translate(" + d.radius + ")"; })
	 .attr("fill",  function(d,j) { var ccx=cc++ % 10; if(ccx==0) dim++; var dimx=dim%8;  var x= isColor2[i][dimx] >ccx ? 1:0; d3.select(this).attr("chartName",Series[dimx]); d3.select(this).attr("value1",isColor2[i][dimx]); d3.select(this).attr("ab",x); d3.select(this).attr("dimx",dimx);d.colori=i; return x==1 && Series1[dimx] ? colors1[getTindex()][i] :bkColor;}) //console.log(i +":"+ dimx + ":"+ ccx + "    ="+ isColor1[i][dimx][ccx]); 
    .attr("class", "small")
	.attr("d", small.size((d.width/10 + d.radius)*0.3).type(getShape()))
	.on("mouseover", function(d,i) { show_details(d,i,this)})
	.on("mouseout", function(d,i) { hide_details(d,i,this)})
	  
}


function show_details (data, i, element) {
 
 if(d3.select(element).attr("fill") != bkColor)
 {
    content = ""
    content +="<span class=\"name\"> For: </span> "+ d3.select(element).attr("chartName")+" <br> <span class=\"name\"> Feature:</span> "+ data.name+" <br>  <span class=\"name\">Rating : </span>"+d3.select(element).attr("value1"); 
    tooltip.showTooltip(content,d3.event)
  }
 }
 
 
 function hide_details (data, i, element) {
      tooltip.hideTooltip();
 }

 var xyz;
function barchart(newdimx) {

if(xyz == null)
{


var bar1=svg.selectAll(".legend1")
      .data(Series)
    .enter().append("g")
      .attr("class", "legend1")
	   .attr("transform", function(d, i) { return "translate(750," + ((i * 30)-400) + ")"; })
      
svg.append("svg:text")
      .attr("class", "title1")
       .attr("transform", function(d, i) { return "translate(500,-430)"; })
	   .text("Comparison of all Charts for: \" " +rings[newdimx].name+" \"");
  bar1.append("rect")
      .attr("x", -100)
	  .attr("y", 2)
	  .attr("rx",5)
      .attr("ry",5)
	  .style("stroke","#eee")
	  .style("stroke-width",2)
      .attr("width", function(d,i) {return 30 * isColor2[newdimx][i]})
      .attr("height", 18)
      .style("fill", function(d,i) { return colors1[0][newdimx]; });

 bar1.append("text")
      .style("text-anchor", "middle")
	  .attr("class","vals")
	  .attr("x", function(d,i) {return 30 * isColor2[newdimx][i]-90})
	  .attr("y", 7)
	  .attr("dx", -3) // padding-right
      .attr("dy", ".45em") // vertical-align: middle
     .attr("text-anchor", "end") // text-align: right
	 .style("font-size", "14px") // vertical-align: middle
	  
      .text(function(d,i) {  return isColor2[newdimx][i]; });
	  
  bar1.append("text")
      .attr("x", -280)
      .attr("y", 9)
      .attr("dy", ".35em")
	  .style("fill", "#888")
      .style("text-anchor", "start")
      .text(function(d) { return d; });
}
else
{
  svg.selectAll(".legend1 rect").transition().duration(500).attr("width", function(d,i) {return (30 * isColor2[newdimx][i])}).style("fill", function(d,i) { return colors1[getTindex()][newdimx]; });
  svg.selectAll(".legend1 .vals").transition().duration(500).attr("x", function(d,i) {return 30 * isColor2[newdimx][i] -90}).text(function(d,i) {  return isColor2[newdimx][i]; });
  svg.selectAll(".title1").text("Comparison of all Charts for: \" " +rings[newdimx].name+" \"");
}
	xyz=newdimx;
}

var xyzb;
function barchart1(newdimx1) {

if(xyzb == null)
	{
 var bar2=svg.selectAll(".legend2")
		  .data(rings)
		.enter().append("g")
		  .attr("class", "legend2")
		   .attr("transform", function(d, i) { return "translate(750," + ((i * 30)) + ")"; });


		svg.append("svg:text")
		  .attr("class", "title2")
		   .attr("transform", function(d, i) { return "translate(500,-30)"; })
		   .text("Comparison of all properties for: \" " +Series[newdimx1]+" \"");
		   
	  var rects=bar2.append("rect")
		  .attr("x", -100)
		  .attr("class","modern")
		  .attr("y", 2)
		  .attr("width", function(d,i) {return 30 * isColor2[i][newdimx1]})
		  .attr("height",18)
		  .attr("rx",5)
		  .attr("ry",5)
		  .style("stroke","#eee")
		  .style("stroke-width",2)
		  .style("fill", function(d,i) { return colors1[0][i]; })
		  .attr("svg:title",function(d,i) { return isColor2[i][newdimx1]; });

		  bar2.append("text")
		  .style("text-anchor", "middle")
		  .attr("class","vals")
		  .attr("x", function(d,i) {return 30 * isColor2[i][newdimx1]-90})
		  .attr("y", 11)
		  .attr("dx", -3) // padding-right
		  .attr("dy", ".35em") // vertical-align: middle
		 .attr("text-anchor", "end") // text-align: right
		 .style("font-size", "14px") // vertical-align: middle
		 
		  .text(function(d,i) {  return isColor2[i][newdimx1]; });

	  bar2.append("text")
		  .attr("x", -280)
		  .attr("y", 10)
		  .attr("dy", ".45em")
		  .style("text-anchor", "start")
		   .style("fill", "#888")
		   .text(function(d,i) { return d.name; });
	}
	else
	{
		svg.selectAll(".legend2 rect").transition().duration(500).attr("width", function(d,i) {return (30 * isColor2[i][newdimx1])}).style("fill", function(d,i) { return colors1[getTindex()][i]; });
		svg.selectAll(".legend2 .vals").transition().duration(500).attr("x", function(d,i) {return 30 * isColor2[i][newdimx1] -90}).text(function(d,i) {  return isColor2[i][[newdimx1]]; });
		svg.selectAll(".title2").text("Comparison of all properties for: \" " +Series[newdimx1]+" \"");
	}
	xyzb=newdimx1;
}


function reload1()
{
d3.selectAll(".small").transition().duration(500).each(function (d, i) { small.size((d.width/10 + d.radius)*0.3).type(getShape()); d3.select(this).attr("d", small);
		 }
	 );
	 
	 
}

function reload2()
{
d3.selectAll(".small").transition().duration(500).each
	 ( 
		 function (d, i) 
		 {
		 var clr=  rings[d.colori].show && d3.select(this).attr("ab")==1 && Series1[d3.select(this).attr("dimx")] ? colors1[getTindex()][d.colori] :bkColor;
		 d3.select(this).attr("fill", clr);
		 d3.selectAll(".SeriesText").data(Series).style("fill", function(d,i) { return Series1[i]?"#222":"#aaa"});
		 }
	 );
	 var ind=getTindex();
	//svg1.selectAll(".legend rect").transition().duration(500).each(function (d, i) {d3.select(this).style("fill", function(d,j) { return rings[i].show ? colors1[ind][i] : "#eee"; })});
	svg.selectAll(".legend rect").transition().duration(500).style("fill", function(d,i) { return rings[i].show ? colors1[ind][i] : "#eee"; });
	barchart(xyz);
	barchart1(xyzb);
}

    </script>
	 
	 <div> Note: hover on chart name to feature Comparison</div>
  </body>

</html>



